{"version":3,"sources":["../../src/lib/content.js"],"names":["ContentInstance","strDataLocation","thing","objContent","arrOnReady","Array","blReady","$","getJSON","receivedJSON","bind","objResponse","each","intIndex","funDoOnReady","call","console","log","push","intItem","sectionId","strSource","html","resTemplate","Handlebars","compile","strHTML","requestContent","err","warn"],"mappings":"AAAA;;;;;;;;;;;;;;;;;AAiBA;;;;;;;;;;IAGMA,e;;AAEL;;;AAGA,0BAAYC,eAAZ,EACA;AAAA;;AACC,OAAKC,KAAL,GAAa,MAAb;AACA,OAAKC,UAAL,GAAkB,EAAlB;AACA,OAAKC,UAAL,GAAkB,IAAIC,KAAJ,EAAlB;AACA,OAAKC,OAAL,GAAe,KAAf;AACA,OAAKL,eAAL,GAAuBA,eAAvB;;AAEAM,IAAEC,OAAF,CAAU,KAAKP,eAAf,EAAgC,KAAKQ,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAhC;AACA;;AAED;;;;;;;+BAGcC,W,EACd;AACC,QAAKR,UAAL,GAAkBQ,WAAlB;AACA,QAAKL,OAAL,GAAe,IAAf;;AAEAC,KAAEK,IAAF,CAAQ,KAAKR,UAAb,EAAyB,UAAUS,QAAV,EAAoBC,YAApB,EACzB;AACCA,iBAAaC,IAAb;AACA,IAHD;AAIA;;AAED;;;;;;0BAGQD,Y,EACR;AACCE,WAAQC,GAAR,CAAY,UAAZ;AACA,OAAG,KAAKX,OAAR,EACA;AACCQ,iBAAaC,IAAb;AACA,IAHD,MAGK;AACJ,SAAKX,UAAL,CAAgBc,IAAhB,CAAqBJ,YAArB;AACA;AACD;;AAED;;;;;;iCAGeK,O,EACf;AACC,UAAO,KAAKhB,UAAL,CAAgBgB,OAAhB,CAAP;AACA;;AAED;;;;;;+BAGaC,S,EACb;AACC,OAAG;AACF,QAAIC,YAAYd,EAAG,MAAIa,SAAJ,GAAc,WAAjB,EAA+BE,IAA/B,EAAhB;AAAA,QACEC,cAAcC,WAAWC,OAAX,CAAoBJ,SAApB,CADhB;AAAA,QAEEK,UAAUH,YAAa,KAAKI,cAAL,CAAqBP,SAArB,CAAb,CAFZ;;AAIAb,MAAG,MAAIa,SAAP,EAAmBE,IAAnB,CAAyBI,OAAzB;;AAEAV,YAAQC,GAAR,CAAY,eAAeS,OAA3B;AAEA,IATD,CASC,OAAME,GAAN,EAAU;AACVZ,YAAQa,IAAR,CAAa,uBAAuBT,SAAvB,GAAmC,KAAnC,GAA2CQ,GAAxD;AACA;AACD;;;;;;kBArEI5B,e","file":"content.js","sourcesContent":["/*\r\n =====================================================\r\n\r\n   _____                                _    _ _  __\r\n  / ____|                              | |  | | |/ /\r\n | (___  _ __   ___  _ __   __ _  ___  | |  | | ' /\r\n  \\___ \\| '_ \\ / _ \\| '_ \\ / _` |/ _ \\ | |  | |  <\r\n  ____) | |_) | (_) | | | | (_| |  __/ | |__| | . \\\r\n |_____/| .__/ \\___/|_| |_|\\__, |\\___|  \\____/|_|\\_\\\r\n        | |                 __/ |\r\n        |_|                |___/\r\n\r\n =====================================================\r\n SPONGE UK DEVELOPER TEST\r\n JSON parser and event handler\r\n =====================================================\r\n*/\r\n'use strict';\r\nexport default\r\n\r\nclass ContentInstance{\r\n\t\r\n\t/**\r\n\t * Runs to create an instance of the class. Begins process of retrieving JSON.\r\n\t **/\r\n\tconstructor(strDataLocation)\r\n\t{\r\n\t\tthis.thing = \"Andy\";\r\n\t\tthis.objContent = {};\r\n\t\tthis.arrOnReady = new Array();\r\n\t\tthis.blReady = false;\r\n\t\tthis.strDataLocation = strDataLocation;\r\n\t\t\r\n\t\t$.getJSON(this.strDataLocation, this.receivedJSON.bind(this));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Called when we have loaded our content json.\r\n\t **/\r\n\treceivedJSON( objResponse )\r\n\t{\r\n\t\tthis.objContent = objResponse;\r\n\t\tthis.blReady = true;\r\n\r\n\t\t$.each( this.arrOnReady, function( intIndex, funDoOnReady ) \r\n\t\t{\r\n\t\t\tfunDoOnReady.call();\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Called to either execute a function when page has loaded, or to push a function to a stack to be executed when the page finishes loading.\r\n\t **/\r\n\tonReady(funDoOnReady)\r\n\t{\r\n\t\tconsole.log(\"On Ready\");\r\n\t\tif(this.blReady)\r\n\t\t{\r\n\t\t\tfunDoOnReady.call();\r\n\t\t}else{\r\n\t\t\tthis.arrOnReady.push(funDoOnReady);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Call with a string ID to ascertain data from JSON.\r\n\t **/\r\n\trequestContent(intItem)\r\n\t{\r\n\t\treturn this.objContent[intItem];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Call when page is ready to be populated. Inserts content into HTML.\r\n\t **/\r\n\tpopulateHTML(sectionId)\r\n\t{\r\n\t\ttry{\r\n\t\t\tvar strSource = $( '#'+sectionId+'-template' ).html(),\r\n\t\t\t\t\tresTemplate = Handlebars.compile( strSource ),\r\n\t\t\t\t\tstrHTML = resTemplate( this.requestContent( sectionId ) );\r\n\t\t\t\t\t\r\n\t\t\t$( '#'+sectionId ).html( strHTML );\r\n\t\t\t\r\n\t\t\tconsole.log(\"Applying: \" + strHTML);\r\n\t\t\t\r\n\t\t}catch(err){\r\n\t\t\tconsole.warn(\"Error populating '\" + sectionId + \"': \" + err);\r\n\t\t}\r\n\t}\r\n\t\r\n}"]}